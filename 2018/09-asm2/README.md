# Ассемблер x86, часть 2

## Установка флагов.

Разные инструкции процессора по разному модифицируют состояние флагов процессора.
[Подробный справочник](http://ref.x86asm.net/).
Для каждой инструкции справочник содержит полную информацию о влиянии на флаги процессора.
В таблице [инструкций x86](http://ref.x86asm.net/coder32.html)
в столбце tested_f указаны флаги процессора, которые влияют на исполнение инструкции,
modif_f - это флаги, значение которых может измениться в результате выполнения инструкции,
def_f - это только те флаги, значение которых может измениться специфицированным образом,
undef_f - это флаги, значение которых после выполнения инструкции не определено.

## Работа с памятью

Как правило, аргумент одноадресных команд (например, `incl`), или один из аргументов двухадресных команд
(например, `addl`) может обращаться к памяти. Аргумент инструкции, обращающийся к памяти, имеет следующий общий вид:
```
        OFFSET(BASE-REG,INDEX-REG,SCALE)
```

`OFFSET` - это 32-битное значение, которое можно рассматривать либо как смещение, либо как базовый адрес в памяти.

`BASE-REG` - это регистр процессора.

`INDEX-REG` - это регистр процессора.

`SCALE` - это число 1, 2, 4, 8 - масштаб.

Адрес для обращения к памяти вычисляется по формуле OFFSET + BASE-REG + INDEX-REG * SCALE.

Примеры:
```gas
        movl    (%eax), %eax    /* в регистр %eax записать 4 байта, */
                                /* расположенные по адресу, который хранился изначально в %eax */
        movl    %ecx, -8(%ebx)  /* сохранить значение из регистра %ecx по адресу %ebx - 8 */
        movl    arr(,%esi,4), %eax /* в регистр %eax записать значение, */
                                   /* расположенное по адресу arr + %esi * 4 */
        movl    -64(%ebp,%esi,4), %eax /* в регистр %eax записать значение, */
                                       /* расположенное по адресу %ebp - 64 + %esi * 4 */
```

